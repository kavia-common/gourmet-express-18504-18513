{"is_source_file": true, "format": "Python", "description": "This file defines API endpoints for managing notifications, including subscribing a user to notifications and sending notifications, using FastAPI with in-memory storage for subscriptions.", "external_files": ["./auth", "../repositories/in_memory"], "external_methods": ["get_current_user"], "published": [], "classes": [{"name": "SubscriptionRequest", "description": "Data model for subscription request payload, containing endpoint and provider info."}, {"name": "NotifyRequest", "description": "Data model for notification sending request, including title, body, and optional order ID."}], "methods": [{"name": "subscribe(payload: SubscriptionRequest, current_user: UserRecord = Depends(get_current_user))", "description": "API endpoint to register a notification subscription for the current user, storing the subscription data in memory.", "scope": "", "scopeKind": ""}, {"name": "send_notification(payload: NotifyRequest, current_user: UserRecord = Depends(get_current_user))", "description": "API endpoint to simulate sending a notification to the current user, confirming delivery based on stored subscriptions.", "scope": "", "scopeKind": ""}], "calls": ["get_current_user", "getattr", "InMemoryDB.subscriptions"], "search-terms": ["notifications", "APIRouter", "subscribe", "send_notification", "InMemoryDB", "notifications.py"], "state": 2, "file_id": 16, "knowledge_revision": 35, "git_revision": "", "ctags": [{"_type": "tag", "name": "NotifyRequest", "path": "/home/kavia/workspace/code-generation/gourmet-express-18504-18513/food_backend_api/src/api/routers/notifications.py", "pattern": "/^class NotifyRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SubscriptionRequest", "path": "/home/kavia/workspace/code-generation/gourmet-express-18504-18513/food_backend_api/src/api/routers/notifications.py", "pattern": "/^class SubscriptionRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "body", "path": "/home/kavia/workspace/code-generation/gourmet-express-18504-18513/food_backend_api/src/api/routers/notifications.py", "pattern": "/^    body: str = Field(..., description=\"Notification body\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NotifyRequest", "scopeKind": "class"}, {"_type": "tag", "name": "endpoint", "path": "/home/kavia/workspace/code-generation/gourmet-express-18504-18513/food_backend_api/src/api/routers/notifications.py", "pattern": "/^    endpoint: str = Field(..., description=\"Notification endpoint or token (stub)\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "SubscriptionRequest", "scopeKind": "class"}, {"_type": "tag", "name": "order_id", "path": "/home/kavia/workspace/code-generation/gourmet-express-18504-18513/food_backend_api/src/api/routers/notifications.py", "pattern": "/^    order_id: Optional[str] = Field(None, description=\"Related order ID\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "NotifyRequest", "scopeKind": "class"}, {"_type": "tag", "name": "provider", "path": "/home/kavia/workspace/code-generation/gourmet-express-18504-18513/food_backend_api/src/api/routers/notifications.py", "pattern": "/^    provider: str = Field(..., description=\"Provider name (e.g., 'fcm', 'sns', 'web')\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "SubscriptionRequest", "scopeKind": "class"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/gourmet-express-18504-18513/food_backend_api/src/api/routers/notifications.py", "pattern": "/^router = APIRouter(tags=[\"Notifications\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "send_notification", "path": "/home/kavia/workspace/code-generation/gourmet-express-18504-18513/food_backend_api/src/api/routers/notifications.py", "pattern": "/^def send_notification(payload: NotifyRequest, current_user: UserRecord = Depends(get_current_use/", "language": "Python", "kind": "function", "signature": "(payload: NotifyRequest, current_user: UserRecord = Depends(get_current_user))"}, {"_type": "tag", "name": "subscribe", "path": "/home/kavia/workspace/code-generation/gourmet-express-18504-18513/food_backend_api/src/api/routers/notifications.py", "pattern": "/^def subscribe(payload: SubscriptionRequest, current_user: UserRecord = Depends(get_current_user)/", "language": "Python", "kind": "function", "signature": "(payload: SubscriptionRequest, current_user: UserRecord = Depends(get_current_user))"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/gourmet-express-18504-18513/food_backend_api/src/api/routers/notifications.py", "pattern": "/^    title: str = Field(..., description=\"Notification title\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NotifyRequest", "scopeKind": "class"}], "hash": "0740e30b11d38b4b4a7aae17dbbbc15f", "format-version": 4, "code-base-name": "food_backend_api", "filename": "food_backend_api/src/api/routers/notifications.py", "fields": [{"name": "str body", "scope": "NotifyRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "str endpoint", "scope": "SubscriptionRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] order_id", "scope": "NotifyRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "str provider", "scope": "SubscriptionRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "router = APIRouter(tags=[\"Notifications\"])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str title", "scope": "NotifyRequest", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"35": ""}]}